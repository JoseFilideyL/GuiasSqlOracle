
CREATE TABLE DEPARTMENT (
    DEPARTMENT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME          VARCHAR2(100),
    CITY          VARCHAR2(100),
    REGION        VARCHAR2(100)
);

CREATE TABLE DOCTOR (
    DOCTOR_ID         NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIRST_NAME        VARCHAR2(50),
    LAST_NAME         VARCHAR2(50),
    BIRTHDATE         DATE,
    DEPARTMENT_ID     NUMBER,
    CERT_SAV_STATUS   VARCHAR2(20) CHECK (CERT_SAV_STATUS IN ('Vigente', 'No Vigente')),
    CONSTRAINT fk_doctor_department FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT(DEPARTMENT_ID)
);


CREATE TABLE HOSPITAL_BRANCH (
    BRANCH_ID      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME           VARCHAR2(100),
    CITY           VARCHAR2(100),
    DEPARTMENT_ID  NUMBER,
    CONSTRAINT fk_branch_department FOREIGN KEY (DEPARTMENT_ID) REFERENCES DEPARTMENT(DEPARTMENT_ID)
);


CREATE TABLE DOCTOR_CONTRACT (
    CONTRACT_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DOCTOR_ID      NUMBER,
    BRANCH_ID      NUMBER,
    CONTRACT_DATE  DATE,
    CONSTRAINT fk_contract_doctor FOREIGN KEY (DOCTOR_ID) REFERENCES DOCTOR(DOCTOR_ID),
    CONSTRAINT fk_contract_branch FOREIGN KEY (BRANCH_ID) REFERENCES HOSPITAL_BRANCH(BRANCH_ID)
);


CREATE TABLE SUPPORT_UNIT (
    SUPPORT_UNIT_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PLACA           VARCHAR2(20),
    EQUIP_COUNT     NUMBER
);


CREATE TABLE AMBULANCE (
    AMBULANCE_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PLACA           VARCHAR2(20),
    MODEL           VARCHAR2(50),
    EQUIP_COUNT     NUMBER,
    SUPPORT_UNIT_ID NUMBER,
    CONSTRAINT fk_ambulance_support FOREIGN KEY (SUPPORT_UNIT_ID) REFERENCES SUPPORT_UNIT(SUPPORT_UNIT_ID)
);


CREATE TABLE NURSE (
    NURSE_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    FIRST_NAME  VARCHAR2(50),
    LAST_NAME   VARCHAR2(50)
);

CREATE TABLE NURSE_SHIFT (
    SHIFT_ID     NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NURSE_ID     NUMBER,
    SHIFT_TYPE   VARCHAR2(20),
    SHIFT_START  DATE,
    SHIFT_END    DATE,
    DAYS_WORKED  NUMBER,
    PAYMENT      NUMBER,
    CONSTRAINT fk_shift_nurse FOREIGN KEY (NURSE_ID) REFERENCES NURSE(NURSE_ID)
);


CREATE TABLE AREA (
    AREA_ID   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME      VARCHAR2(100)
);


CREATE TABLE SALA (
    SALA_ID    NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    AREA_ID    NUMBER,
    OCCUPANCY  NUMBER,
    CONSTRAINT fk_sala_area FOREIGN KEY (AREA_ID) REFERENCES AREA(AREA_ID)
);


INSERT INTO DEPARTMENT (NAME, CITY, REGION) VALUES ('Cardiología', 'Santiago', 'Metropolitana');
INSERT INTO DEPARTMENT (NAME, CITY, REGION) VALUES ('Neurología', 'Concepción', 'Biobío');
INSERT INTO DEPARTMENT (NAME, CITY, REGION) VALUES ('Oncología', 'Valparaíso', 'Valparaíso');
INSERT INTO DEPARTMENT (NAME, CITY, REGION) VALUES ('Pediatría', 'Santiago', 'Metropolitana');

INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('Juan', 'Pérez', TO_DATE('1975-04-15','YYYY-MM-DD'), 1, 'Vigente');
INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('María', 'González', TO_DATE('1980-03-22','YYYY-MM-DD'), 2, 'No Vigente');
INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('Carlos', 'Rojas', TO_DATE('1968-03-05','YYYY-MM-DD'), 1, 'Vigente');
INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('Lucía', 'Martínez', TO_DATE('1985-07-19','YYYY-MM-DD'), 3, 'Vigente');
INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('Andrés', 'Silva', TO_DATE('1978-12-11','YYYY-MM-DD'), 4, 'No Vigente');
INSERT INTO DOCTOR (FIRST_NAME, LAST_NAME, BIRTHDATE, DEPARTMENT_ID, CERT_SAV_STATUS)
VALUES ('Elena', 'Fuentes', TO_DATE('1990-03-28','YYYY-MM-DD'), 2, 'Vigente');

-- Insertar sucursales del hospital
INSERT INTO HOSPITAL_BRANCH (NAME, CITY, DEPARTMENT_ID)
VALUES ('Hospital Central VitalCare', 'Santiago', 1);
INSERT INTO HOSPITAL_BRANCH (NAME, CITY, DEPARTMENT_ID)
VALUES ('Sucursal Norte VitalCare', 'Santiago', 1);
INSERT INTO HOSPITAL_BRANCH (NAME, CITY, DEPARTMENT_ID)
VALUES ('Hospital Concepción VitalCare', 'Concepción', 2);
INSERT INTO HOSPITAL_BRANCH (NAME, CITY, DEPARTMENT_ID)
VALUES ('Centro Oncológico VitalCare', 'Valparaíso', 3);
INSERT INTO HOSPITAL_BRANCH (NAME, CITY, DEPARTMENT_ID)
VALUES ('Pediatría Integral VitalCare', 'Santiago', 4);


INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (1, 1, TO_DATE('2010-05-01','YYYY-MM-DD'));
INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (2, 3, TO_DATE('2015-09-15','YYYY-MM-DD'));
INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (3, 2, TO_DATE('2008-11-20','YYYY-MM-DD'));
INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (4, 4, TO_DATE('2012-06-10','YYYY-MM-DD'));
INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (5, 5, TO_DATE('2018-01-05','YYYY-MM-DD'));
INSERT INTO DOCTOR_CONTRACT (DOCTOR_ID, BRANCH_ID, CONTRACT_DATE)
VALUES (6, 3, TO_DATE('2020-03-18','YYYY-MM-DD'));


INSERT INTO SUPPORT_UNIT (PLACA, EQUIP_COUNT)
VALUES ('SUP-001', 5);
INSERT INTO SUPPORT_UNIT (PLACA, EQUIP_COUNT)
VALUES ('SUP-002', 7);
INSERT INTO SUPPORT_UNIT (PLACA, EQUIP_COUNT)
VALUES ('SUP-003', 6);

INSERT INTO AMBULANCE (PLACA, MODEL, EQUIP_COUNT, SUPPORT_UNIT_ID)
VALUES ('AMB-100', 'Mercedes Sprinter', 5, 1);
INSERT INTO AMBULANCE (PLACA, MODEL, EQUIP_COUNT, SUPPORT_UNIT_ID)
VALUES ('AMB-200', 'Ford Transit', 8, 2);
INSERT INTO AMBULANCE (PLACA, MODEL, EQUIP_COUNT, SUPPORT_UNIT_ID)
VALUES ('AMB-300', 'Renault Master', 7, 3);
INSERT INTO AMBULANCE (PLACA, MODEL, EQUIP_COUNT, SUPPORT_UNIT_ID)
VALUES ('AMB-400', 'Fiat Ducato', 6, 1);

-- Insertar enfermeros
INSERT INTO NURSE (FIRST_NAME, LAST_NAME)
VALUES ('Ana', 'López');
INSERT INTO NURSE (FIRST_NAME, LAST_NAME)
VALUES ('Luis', 'Martínez');
INSERT INTO NURSE (FIRST_NAME, LAST_NAME)
VALUES ('Sofía', 'Ramírez');
INSERT INTO NURSE (FIRST_NAME, LAST_NAME)
VALUES ('Diego', 'Hernández');
INSERT INTO NURSE (FIRST_NAME, LAST_NAME)
VALUES ('Valentina', 'Castro');


INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (1, 1, 'Diurno', TO_DATE('2025-02-01','YYYY-MM-DD'), TO_DATE('2025-02-07','YYYY-MM-DD'), 7, 350000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (2, 2, 'Nocturno', TO_DATE('2025-02-03','YYYY-MM-DD'), TO_DATE('2025-02-10','YYYY-MM-DD'), 8, 400000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (3, 3, 'Rotativo', TO_DATE('2025-01-15','YYYY-MM-DD'), TO_DATE('2025-01-22','YYYY-MM-DD'), 8, 380000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (4, 4, 'Diurno', TO_DATE('2025-01-10','YYYY-MM-DD'), TO_DATE('2025-01-16','YYYY-MM-DD'), 7, 350000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (5, 5, 'Nocturno', TO_DATE('2025-02-05','YYYY-MM-DD'), TO_DATE('2025-02-12','YYYY-MM-DD'), 8, 400000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (6, 1, 'Rotativo', TO_DATE('2025-01-20','YYYY-MM-DD'), TO_DATE('2025-01-27','YYYY-MM-DD'), 8, 380000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (7, 3, 'Diurno', TO_DATE('2025-02-10','YYYY-MM-DD'), TO_DATE('2025-02-16','YYYY-MM-DD'), 7, 350000);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (8, 1, 'Nocturno', TO_DATE('2025-03-05', 'YYYY-MM-DD'), TO_DATE('2025-03-07', 'YYYY-MM-DD'), 3, 600);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (9, 1, 'Nocturno', TO_DATE('2025-03-15', 'YYYY-MM-DD'), TO_DATE('2025-03-18', 'YYYY-MM-DD'), 4, 800);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (10, 2, 'Rotativo', TO_DATE('2025-03-03', 'YYYY-MM-DD'), TO_DATE('2025-03-04', 'YYYY-MM-DD'), 2, 400);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (11, 3, 'Rotativo', TO_DATE('2025-03-10', 'YYYY-MM-DD'), TO_DATE('2025-03-11', 'YYYY-MM-DD'), 2, 500);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (12, 4, 'Diurno', TO_DATE('2025-03-20', 'YYYY-MM-DD'), TO_DATE('2025-03-21', 'YYYY-MM-DD'), 2, 450);

INSERT INTO NURSE_SHIFT (SHIFT_ID, NURSE_ID, SHIFT_TYPE, SHIFT_START, SHIFT_END, DAYS_WORKED, PAYMENT)
VALUES (13, 4, 'Nocturno', TO_DATE('2025-03-25', 'YYYY-MM-DD'), TO_DATE('2025-03-27', 'YYYY-MM-DD'), 3, 700);


-- Insertar áreas (para análisis de ocupación)
INSERT INTO AREA (NAME) VALUES ('Emergencia');
INSERT INTO AREA (NAME) VALUES ('Cuidados Intensivos');
INSERT INTO AREA (NAME) VALUES ('Pediatría');
INSERT INTO AREA (NAME) VALUES ('Cirugía');
INSERT INTO AREA (NAME) VALUES ('Maternidad');

-- Insertar salas asociadas a cada área
-- Área Emergencia
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (1, 75);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (1, 80);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (1, 70);
-- Área Cuidados Intensivos
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (2, 65);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (2, 70);
-- Área Pediatría
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (3, 50);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (3, 55);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (3, 60);
-- Área Cirugía
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (4, 85);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (4, 90);
-- Área Maternidad
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (5, 95);
INSERT INTO SALA (AREA_ID, OCCUPANCY) VALUES (5, 100);


COMMIT;
